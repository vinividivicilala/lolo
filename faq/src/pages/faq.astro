---
import Layout from '../layouts/Layout.astro';
import FAQItem from '../components/FAQItem.astro';

const faqData = [
  {
    id: 1,
    index: "1",
    icon: "ðŸš€",
    category: "Framework",
    question: "Apa itu Astro?",
    answer: "Astro adalah framework modern untuk membangun website statis dan hybrid.",
    fullDescription: "Astro memungkinkan developer menggunakan berbagai framework frontend sekaligus. Dengan pendekatan Island Architecture, performa website menjadi lebih cepat.",
    topic: "Astro",
    lastUpdated: "11 Sep 2025",
    isNew: true
  },
  {
    id: 2,
    index: "2",
    icon: "âš¡",
    category: "Performa",
    question: "Kenapa Astro cepat?",
    answer: "Karena Astro hanya mengirimkan HTML murni ke browser.",
    fullDescription: "Astro menghilangkan JavaScript yang tidak perlu dengan pendekatan partial hydration. Hanya komponen interaktif yang dikirim dengan JS, sisanya berupa HTML murni.",
    topic: "Performa",
    lastUpdated: "10 Sep 2025",
    isNew: false
  },
  // Tambahkan FAQ lain sesuai kebutuhan...
];
---

<Layout title="FAQ">
  <section class="faq-section">
    <h1 class="page-title">Frequently Asked Questions</h1>
    <div class="faq-items">
      {faqData.map(faq => (
        <FAQItem {...faq} onClick={() => openFAQModal(faq.id)} />
      ))}
    </div>
  </section>

  <!-- Modal FAQ -->
  <div id="faqModal" class="modal">
    <div class="modal-content large-modal">
      <span class="close" onclick="closeFAQModal()">&times;</span>
      <div id="modalContent"></div>
    </div>
  </div>
</Layout>

<script>
  function openFAQModal(id) {
    const faq = ${JSON.stringify(faqData)};
    const item = faq.find(f => f.id === id);
    if (!item) return;

    const modal = document.getElementById("faqModal");
    const modalContent = document.getElementById("modalContent");

    modalContent.innerHTML = `
      <div class="modal-faq-content">
        <div class="line-box modal-category">${item.category}</div>
        <h2 class="line-box modal-title">${item.question}</h2>
        <div class="line-box modal-meta">
          <div class="modal-update">ðŸ•’ ${item.lastUpdated}</div>
          ${item.isNew ? '<div class="modal-status">ðŸ†• BARU</div>' : ''}
        </div>
        <div class="line-box modal-description">
          ${item.fullDescription.replace(/\n/g, '<br>')}
        </div>
        <div class="line-box modal-timeline">
          <div class="timeline-item">
            <div class="timeline-title">Informasi Penting</div>
            <div class="timeline-content">Informasi detail tentang ${item.topic} yang perlu diperhatikan.</div>
          </div>
          <div class="timeline-item">
            <div class="timeline-title">Tips Penggunaan</div>
            <div class="timeline-content">Beberapa tips untuk memaksimalkan penggunaan fitur ini.</div>
          </div>
          <div class="timeline-item">
            <div class="timeline-title">Best Practices</div>
            <div class="timeline-content">Rekomendasi praktik terbaik untuk implementasi yang optimal.</div>
          </div>
        </div>
      </div>
    `;

    modal.style.display = "block";
  }

  function closeFAQModal() {
    document.getElementById("faqModal").style.display = "none";
  }
</script>

<style>
/* ===== Line Box Global ===== */
.line-box {
  border: 2px solid rgba(0,0,0,0.5);
  border-radius: 12px;
  padding: 20px 25px;
  margin-bottom: 30px;
  background: #fff;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

/* ===== Modal ===== */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  inset: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
}
.modal-content {
  background: #fff;
  margin: 2% auto;
  padding: 0;
  border: 3px solid #000;
  width: 92%;
  max-width: 1000px;
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  position: relative;
  max-height: 90vh;
  overflow-y: auto;
}
.large-modal { max-width: 1100px; }
.close {
  position: absolute;
  top: 25px;
  right: 30px;
  font-size: 36px;
  font-weight: bold;
  cursor: pointer;
  background: #f1f5f9;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid rgba(0,0,0,0.5);
}
.close:hover { background: #e2e8f0; }

/* ===== Konten Modal ===== */
.modal-faq-content { padding: 50px; }
.modal-category { font-size: 1.2rem; font-weight: 700; text-transform: uppercase; }
.modal-title { font-size: 2.4rem; font-weight: 800; line-height: 1.4; }
.modal-meta { display: flex; gap: 15px; font-size: 1.1rem; align-items: center; }
.modal-status { background: #10b981; color: #fff; padding: 8px 16px; border-radius: 6px; font-weight: 700; }
.modal-description { font-size: 1.3rem; line-height: 1.8; background: #fafafa; }

/* ===== Timeline ===== */
.modal-timeline { margin-top: 20px; }
.timeline-item { margin-bottom: 25px; }
.timeline-title { font-size: 1.4rem; font-weight: 700; margin-bottom: 10px; }
.timeline-content { font-size: 1.1rem; line-height: 1.6; color: #374151; }
</style>
